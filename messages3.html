<head>
  <link rel="stylesheet" href="static/css/style.css" />
  <title>Chat 3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="ilovedivs">
    <h1 class="blackmagic">a</h1>
    <div class="chatbox">
      <div class="mtopbar">
        <span class="minibackbutton">
          <a href="index.html">
            <h1 class="miniishtext">‚Üê</h1>
          </a>
        </span>
        <span class="righttexthead">
          <h1 class="miniishtext2">Chat 3</h1>
        </span>
      </div>

      <div class="chatcontent">
        {% for name, content, time, msg_id in messages %}
        <div class="message {% if name == session.get('username') %}my-message{% endif %}">
          <div class="message-header">
            <span class="username">{{ name or 'Anonymous' }}</span>
            <span class="timestamp"
              >{{ time.split(' ')[0] }} at {{ time.split(' ')[1] }}</span
            >
          </div>
          <div class="message-content">{{ content }}</div>
        </div>
        {% else %}
        <div class="message">No messages yet.</div>
        {% endfor %}
      </div>

      <form method="POST" class="message-form">
        <input
          type="text"
          name="message"
          class="message-input"
          placeholder="Write message here!"
          required
        />
        <button type="submit" class="send-button">Send</button>
      </form>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const chatContent = document.querySelector(".chatcontent");
      chatContent.scrollTop = chatContent.scrollHeight;
    });
  </script>
</body>
